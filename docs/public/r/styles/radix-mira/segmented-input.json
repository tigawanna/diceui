{
  "name": "segmented-input",
  "dependencies": [
    "radix-ui"
  ],
  "registryDependencies": [
    "input"
  ],
  "files": [
    {
      "path": "ui/segmented-input.tsx",
      "content": "\"use client\";\r\n\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\nimport {\r\n  Direction as DirectionPrimitive,\r\n  Slot as SlotPrimitive,\r\n} from \"radix-ui\";\r\nimport * as React from \"react\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst ROOT_NAME = \"SegmentedInput\";\r\nconst ITEM_NAME = \"SegmentedInputItem\";\r\n\r\ntype Direction = \"ltr\" | \"rtl\";\r\ntype Orientation = \"horizontal\" | \"vertical\";\r\ntype Size = \"default\" | \"sm\" | \"lg\";\r\ntype Position = \"isolated\" | \"first\" | \"middle\" | \"last\";\r\n\r\ninterface SegmentedInputContextValue {\r\n  dir?: Direction;\r\n  orientation?: Orientation;\r\n  size?: Size;\r\n  disabled?: boolean;\r\n  invalid?: boolean;\r\n  required?: boolean;\r\n}\r\n\r\nconst SegmentedInputContext =\r\n  React.createContext<SegmentedInputContextValue | null>(null);\r\n\r\nfunction useSegmentedInputContext(consumerName: string) {\r\n  const context = React.useContext(SegmentedInputContext);\r\n  if (!context) {\r\n    throw new Error(`\\`${consumerName}\\` must be used within \\`${ROOT_NAME}\\``);\r\n  }\r\n  return context;\r\n}\r\n\r\ninterface SegmentedInputProps extends React.ComponentProps<\"div\"> {\r\n  dir?: Direction;\r\n  orientation?: Orientation;\r\n  size?: Size;\r\n  asChild?: boolean;\r\n  disabled?: boolean;\r\n  invalid?: boolean;\r\n  required?: boolean;\r\n}\r\n\r\nfunction SegmentedInput(props: SegmentedInputProps) {\r\n  const {\r\n    size = \"default\",\r\n    dir: dirProp,\r\n    orientation = \"horizontal\",\r\n    children,\r\n    className,\r\n    asChild,\r\n    disabled,\r\n    invalid,\r\n    required,\r\n    ...rootProps\r\n  } = props;\r\n\r\n  const dir = DirectionPrimitive.useDirection(dirProp);\r\n\r\n  const contextValue = React.useMemo<SegmentedInputContextValue>(\r\n    () => ({\r\n      dir,\r\n      orientation,\r\n      size,\r\n      disabled,\r\n      invalid,\r\n      required,\r\n    }),\r\n    [dir, orientation, size, disabled, invalid, required],\r\n  );\r\n\r\n  const childrenArray = React.Children.toArray(children);\r\n  const childrenCount = childrenArray.length;\r\n\r\n  const segmentedInputItems = React.Children.map(children, (child, index) => {\r\n    if (React.isValidElement<SegmentedInputItemProps>(child)) {\r\n      if (!child.props.position) {\r\n        let position: Position;\r\n\r\n        if (childrenCount === 1) {\r\n          position = \"isolated\";\r\n        } else if (index === 0) {\r\n          position = \"first\";\r\n        } else if (index === childrenCount - 1) {\r\n          position = \"last\";\r\n        } else {\r\n          position = \"middle\";\r\n        }\r\n\r\n        return React.cloneElement(child, { position });\r\n      }\r\n    }\r\n    return child;\r\n  });\r\n\r\n  const RootPrimitive = asChild ? SlotPrimitive.Slot : \"div\";\r\n\r\n  return (\r\n    <SegmentedInputContext.Provider value={contextValue}>\r\n      <RootPrimitive\r\n        role=\"group\"\r\n        aria-orientation={orientation}\r\n        data-slot=\"segmented-input\"\r\n        data-orientation={orientation}\r\n        data-disabled={disabled ? \"\" : undefined}\r\n        data-invalid={invalid ? \"\" : undefined}\r\n        data-required={required ? \"\" : undefined}\r\n        dir={dir}\r\n        {...rootProps}\r\n        className={cn(\r\n          \"flex\",\r\n          orientation === \"horizontal\" ? \"flex-row\" : \"flex-col\",\r\n          className,\r\n        )}\r\n      >\r\n        {segmentedInputItems}\r\n      </RootPrimitive>\r\n    </SegmentedInputContext.Provider>\r\n  );\r\n}\r\n\r\nconst segmentedInputItemVariants = cva(\"\", {\r\n  variants: {\r\n    position: {\r\n      isolated: \"\",\r\n      first: \"rounded-e-none\",\r\n      middle: \"-ms-px rounded-none border-l-0\",\r\n      last: \"-ms-px rounded-s-none border-l-0\",\r\n    },\r\n    orientation: {\r\n      horizontal: \"\",\r\n      vertical: \"\",\r\n    },\r\n    size: {\r\n      sm: \"h-8 px-2 text-xs\",\r\n      default: \"h-9 px-3\",\r\n      lg: \"h-11 px-4\",\r\n    },\r\n  },\r\n  compoundVariants: [\r\n    {\r\n      position: \"first\",\r\n      orientation: \"vertical\",\r\n      class: \"ms-0 rounded-e-md rounded-b-none border-l\",\r\n    },\r\n    {\r\n      position: \"middle\",\r\n      orientation: \"vertical\",\r\n      class: \"ms-0 -mt-px rounded-none border-t-0 border-l\",\r\n    },\r\n    {\r\n      position: \"last\",\r\n      orientation: \"vertical\",\r\n      class: \"ms-0 -mt-px rounded-s-md rounded-t-none border-t-0 border-l\",\r\n    },\r\n  ],\r\n  defaultVariants: {\r\n    position: \"isolated\",\r\n    orientation: \"horizontal\",\r\n    size: \"default\",\r\n  },\r\n});\r\n\r\ninterface SegmentedInputItemProps\r\n  extends React.ComponentProps<\"input\">,\r\n    Omit<VariantProps<typeof segmentedInputItemVariants>, \"size\"> {\r\n  asChild?: boolean;\r\n}\r\n\r\nfunction SegmentedInputItem(props: SegmentedInputItemProps) {\r\n  const { asChild, className, position, disabled, required, ...inputProps } =\r\n    props;\r\n  const context = useSegmentedInputContext(ITEM_NAME);\r\n\r\n  const isDisabled = disabled ?? context.disabled;\r\n  const isRequired = required ?? context.required;\r\n\r\n  const ItemPrimitive = asChild ? SlotPrimitive.Slot : Input;\r\n\r\n  return (\r\n    <ItemPrimitive\r\n      aria-invalid={context.invalid}\r\n      aria-required={isRequired}\r\n      data-disabled={isDisabled ? \"\" : undefined}\r\n      data-invalid={context.invalid ? \"\" : undefined}\r\n      data-orientation={context.orientation}\r\n      data-position={position}\r\n      data-required={isRequired ? \"\" : undefined}\r\n      data-slot=\"segmented-input-item\"\r\n      disabled={isDisabled}\r\n      required={isRequired}\r\n      {...inputProps}\r\n      className={cn(\r\n        segmentedInputItemVariants({\r\n          position,\r\n          orientation: context.orientation,\r\n          size: context.size,\r\n          className,\r\n        }),\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nexport {\r\n  SegmentedInput,\r\n  SegmentedInputItem,\r\n  //\r\n  type SegmentedInputProps,\r\n};\r\n",
      "type": "registry:ui",
      "target": ""
    }
  ],
  "type": "registry:ui"
}