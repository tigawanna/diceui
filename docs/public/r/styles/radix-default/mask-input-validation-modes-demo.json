{
  "name": "mask-input-validation-modes-demo",
  "registryDependencies": [
    "badge",
    "card",
    "label",
    "mask-input"
  ],
  "files": [
    {
      "path": "examples/mask-input-validation-modes-demo.tsx",
      "content": "\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { MaskInput } from \"@/registry/bases/radix/ui/mask-input\";\r\n\r\nconst modes = [\r\n  {\r\n    label: \"onChange\",\r\n    description: \"Validates on every keystroke\",\r\n    value: \"onChange\" as const,\r\n  },\r\n  {\r\n    label: \"onBlur\",\r\n    description: \"Validates when field loses focus\",\r\n    value: \"onBlur\" as const,\r\n  },\r\n  {\r\n    label: \"onTouched\",\r\n    description: \"Validates after first blur, then on change\",\r\n    value: \"onTouched\" as const,\r\n  },\r\n  {\r\n    label: \"onSubmit\",\r\n    description: \"Validates only on form submission\",\r\n    value: \"onSubmit\" as const,\r\n  },\r\n];\r\n\r\nexport default function MaskInputValidationModesDemo() {\r\n  const [validationStates, setValidationStates] = React.useState({\r\n    onChange: { isValid: true, message: \"\" },\r\n    onBlur: { isValid: true, message: \"\" },\r\n    onTouched: { isValid: true, message: \"\" },\r\n    onSubmit: { isValid: true, message: \"\" },\r\n  });\r\n\r\n  const [values, setValues] = React.useState({\r\n    onChange: \"\",\r\n    onBlur: \"\",\r\n    onTouched: \"\",\r\n    onSubmit: \"\",\r\n  });\r\n\r\n  const [submitAttempted, setSubmitAttempted] = React.useState(false);\r\n\r\n  const onValidate = React.useCallback(\r\n    (mode: keyof typeof validationStates) =>\r\n      (isValid: boolean, unmaskedValue: string) => {\r\n        const message = isValid\r\n          ? `✓ Valid (${unmaskedValue.length}/10)`\r\n          : `✗ Invalid (${unmaskedValue.length}/10)`;\r\n\r\n        setValidationStates((prev) => ({\r\n          ...prev,\r\n          [mode]: { isValid, message },\r\n        }));\r\n      },\r\n    [],\r\n  );\r\n\r\n  const onValueChange = React.useCallback(\r\n    (mode: keyof typeof values) =>\r\n      (_maskedValue: string, unmaskedValue: string) => {\r\n        setValues((prev) => ({\r\n          ...prev,\r\n          [mode]: unmaskedValue,\r\n        }));\r\n      },\r\n    [],\r\n  );\r\n\r\n  const onSubmit = React.useCallback(\r\n    (event: React.FormEvent) => {\r\n      event.preventDefault();\r\n      setSubmitAttempted(true);\r\n\r\n      const unmaskedValue = values.onSubmit;\r\n      const isValid = unmaskedValue.length === 10;\r\n      const message = isValid\r\n        ? `✓ Valid (${unmaskedValue.length}/10)`\r\n        : `✗ Invalid (${unmaskedValue.length}/10)`;\r\n\r\n      setValidationStates((prev) => ({\r\n        ...prev,\r\n        onSubmit: { isValid, message },\r\n      }));\r\n    },\r\n    [values.onSubmit],\r\n  );\r\n\r\n  return (\r\n    <div className=\"grid w-full gap-4 sm:grid-cols-2\">\r\n      {modes.map((mode) => (\r\n        <ValidationModeCard\r\n          key={mode.value}\r\n          mode={mode}\r\n          value={values[mode.value]}\r\n          validationState={validationStates[mode.value]}\r\n          onValueChange={onValueChange(mode.value)}\r\n          onValidate={onValidate(mode.value)}\r\n          onSubmit={mode.value === \"onSubmit\" ? onSubmit : undefined}\r\n          submitAttempted={submitAttempted}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface ValidationModeCardProps {\r\n  mode: (typeof modes)[number];\r\n  value: string;\r\n  validationState: { isValid: boolean; message: string };\r\n  onValueChange: (maskedValue: string, unmaskedValue: string) => void;\r\n  onValidate: (isValid: boolean, unmaskedValue: string) => void;\r\n  onSubmit?: (event: React.FormEvent) => void;\r\n  submitAttempted: boolean;\r\n}\r\n\r\nfunction ValidationModeCard({\r\n  mode,\r\n  value,\r\n  validationState,\r\n  onValueChange,\r\n  onValidate,\r\n  onSubmit,\r\n  submitAttempted,\r\n}: ValidationModeCardProps) {\r\n  const inputContent = (\r\n    <div className=\"flex flex-col gap-1\">\r\n      <Label htmlFor={`phone-${mode.value}`} className=\"sr-only\">\r\n        Phone Number\r\n      </Label>\r\n      <MaskInput\r\n        id={`phone-${mode.value}`}\r\n        mask=\"phone\"\r\n        validationMode={mode.value}\r\n        placeholder=\"Enter phone number\"\r\n        value={value}\r\n        onValueChange={onValueChange}\r\n        onValidate={onValidate}\r\n        invalid={!validationState.isValid}\r\n        className=\"h-8 text-sm\"\r\n      />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-3 rounded-md border bg-card p-4 text-card-foreground shadow-sm\">\r\n      <div className=\"flex flex-col gap-1\">\r\n        <h4 className=\"font-medium text-xs\">{mode.label}</h4>\r\n        <p className=\"text-muted-foreground text-xs leading-tight\">\r\n          {mode.description}\r\n        </p>\r\n      </div>\r\n      {onSubmit ? (\r\n        <form onSubmit={onSubmit} className=\"flex flex-col gap-2\">\r\n          {inputContent}\r\n          <Button type=\"submit\" size=\"sm\" className=\"h-7 text-xs\">\r\n            Submit\r\n          </Button>\r\n        </form>\r\n      ) : (\r\n        inputContent\r\n      )}\r\n      <div className=\"flex items-center gap-1\">\r\n        <Badge\r\n          variant={validationState.isValid ? \"default\" : \"destructive\"}\r\n          className=\"h-5 px-1.5 text-xs\"\r\n        >\r\n          {validationState.isValid ? \"Valid\" : \"Invalid\"}\r\n        </Badge>\r\n        <span className=\"text-muted-foreground text-xs\">\r\n          {validationState.message ||\r\n            (mode.value === \"onSubmit\" && !submitAttempted\r\n              ? \"Click 'Submit' to check...\"\r\n              : \"Start typing to see validation...\")}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:example",
      "target": ""
    }
  ],
  "type": "registry:example"
}