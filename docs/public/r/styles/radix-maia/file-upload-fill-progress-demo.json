{
  "name": "file-upload-fill-progress-demo",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "button",
    "file-upload"
  ],
  "files": [
    {
      "path": "examples/file-upload-fill-progress-demo.tsx",
      "content": "\"use client\";\r\n\r\nimport { Upload, X } from \"lucide-react\";\r\nimport * as React from \"react\";\r\nimport { toast } from \"sonner\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  FileUpload,\r\n  FileUploadDropzone,\r\n  FileUploadItem,\r\n  FileUploadItemDelete,\r\n  FileUploadItemMetadata,\r\n  FileUploadItemPreview,\r\n  FileUploadItemProgress,\r\n  FileUploadList,\r\n  FileUploadTrigger,\r\n} from \"@/registry/bases/radix/ui/file-upload\";\r\n\r\nexport default function FileUploadFillProgressDemo() {\r\n  const [files, setFiles] = React.useState<File[]>([]);\r\n\r\n  const onUpload = React.useCallback(\r\n    async (\r\n      files: File[],\r\n      {\r\n        onProgress,\r\n        onSuccess,\r\n        onError,\r\n      }: {\r\n        onProgress: (file: File, progress: number) => void;\r\n        onSuccess: (file: File) => void;\r\n        onError: (file: File, error: Error) => void;\r\n      },\r\n    ) => {\r\n      try {\r\n        // Process each file individually\r\n        const uploadPromises = files.map(async (file) => {\r\n          try {\r\n            // Simulate file upload with progress\r\n            const totalChunks = 10;\r\n            let uploadedChunks = 0;\r\n\r\n            // Simulate chunk upload with delays\r\n            for (let i = 0; i < totalChunks; i++) {\r\n              // Simulate network delay (100-300ms per chunk)\r\n              await new Promise((resolve) =>\r\n                setTimeout(resolve, Math.random() * 200 + 100),\r\n              );\r\n\r\n              // Update progress for this specific file\r\n              uploadedChunks++;\r\n              const progress = (uploadedChunks / totalChunks) * 100;\r\n              onProgress(file, progress);\r\n            }\r\n\r\n            // Simulate server processing delay\r\n            await new Promise((resolve) => setTimeout(resolve, 500));\r\n            onSuccess(file);\r\n          } catch (error) {\r\n            onError(\r\n              file,\r\n              error instanceof Error ? error : new Error(\"Upload failed\"),\r\n            );\r\n          }\r\n        });\r\n\r\n        // Wait for all uploads to complete\r\n        await Promise.all(uploadPromises);\r\n      } catch (error) {\r\n        // This handles any error that might occur outside the individual upload processes\r\n        console.error(\"Unexpected error during upload:\", error);\r\n      }\r\n    },\r\n    [],\r\n  );\r\n\r\n  const onFileReject = React.useCallback((file: File, message: string) => {\r\n    toast(message, {\r\n      description: `\"${file.name.length > 20 ? `${file.name.slice(0, 20)}...` : file.name}\" has been rejected`,\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <FileUpload\r\n      value={files}\r\n      onValueChange={setFiles}\r\n      maxFiles={10}\r\n      maxSize={5 * 1024 * 1024}\r\n      className=\"w-full max-w-md\"\r\n      onUpload={onUpload}\r\n      onFileReject={onFileReject}\r\n      multiple\r\n    >\r\n      <FileUploadDropzone>\r\n        <div className=\"flex flex-col items-center gap-1 text-center\">\r\n          <div className=\"flex items-center justify-center rounded-full border p-2.5\">\r\n            <Upload className=\"size-6 text-muted-foreground\" />\r\n          </div>\r\n          <p className=\"font-medium text-sm\">Drag & drop files here</p>\r\n          <p className=\"text-muted-foreground text-xs\">\r\n            Or click to browse (max 10 files, up to 5MB each)\r\n          </p>\r\n        </div>\r\n        <FileUploadTrigger asChild>\r\n          <Button variant=\"outline\" size=\"sm\" className=\"mt-2 w-fit\">\r\n            Browse files\r\n          </Button>\r\n        </FileUploadTrigger>\r\n      </FileUploadDropzone>\r\n      <FileUploadList orientation=\"horizontal\">\r\n        {files.map((file, index) => (\r\n          <FileUploadItem key={index} value={file} className=\"p-0\">\r\n            <FileUploadItemPreview className=\"size-20\">\r\n              <FileUploadItemProgress variant=\"fill\" />\r\n            </FileUploadItemPreview>\r\n            <FileUploadItemMetadata className=\"sr-only\" />\r\n            <FileUploadItemDelete asChild>\r\n              <Button\r\n                variant=\"secondary\"\r\n                size=\"icon\"\r\n                className=\"absolute -top-1 -right-1 size-5 rounded-full\"\r\n              >\r\n                <X className=\"size-3\" />\r\n              </Button>\r\n            </FileUploadItemDelete>\r\n          </FileUploadItem>\r\n        ))}\r\n      </FileUploadList>\r\n    </FileUpload>\r\n  );\r\n}\r\n",
      "type": "registry:example",
      "target": ""
    }
  ],
  "type": "registry:example"
}