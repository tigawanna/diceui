{
  "name": "timeline",
  "dependencies": [
    "radix-ui"
  ],
  "registryDependencies": [
    "@diceui/use-isomorphic-layout-effect",
    "@diceui/use-lazy-ref"
  ],
  "files": [
    {
      "path": "ui/timeline.tsx",
      "content": "\"use client\";\r\n\r\nimport { cva } from \"class-variance-authority\";\r\nimport {\r\n  Direction as DirectionPrimitive,\r\n  Slot as SlotPrimitive,\r\n} from \"radix-ui\";\r\nimport * as React from \"react\";\r\nimport { useComposedRefs } from \"@/lib/compose-refs\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useIsomorphicLayoutEffect } from \"@/registry/bases/radix/hooks/use-isomorphic-layout-effect\";\r\nimport { useLazyRef } from \"@/registry/bases/radix/hooks/use-lazy-ref\";\r\n\r\ntype Direction = \"ltr\" | \"rtl\";\r\ntype Orientation = \"vertical\" | \"horizontal\";\r\ntype Variant = \"default\" | \"alternate\";\r\ntype Status = \"completed\" | \"active\" | \"pending\";\r\n\r\ninterface DivProps extends React.ComponentProps<\"div\"> {\r\n  asChild?: boolean;\r\n}\r\n\r\ntype ItemElement = React.ComponentRef<typeof TimelineItem>;\r\n\r\nconst ROOT_NAME = \"Timeline\";\r\nconst ITEM_NAME = \"TimelineItem\";\r\nconst DOT_NAME = \"TimelineDot\";\r\nconst CONNECTOR_NAME = \"TimelineConnector\";\r\nconst CONTENT_NAME = \"TimelineContent\";\r\n\r\nfunction getItemStatus(itemIndex: number, activeIndex?: number): Status {\r\n  if (activeIndex === undefined) return \"pending\";\r\n  if (itemIndex < activeIndex) return \"completed\";\r\n  if (itemIndex === activeIndex) return \"active\";\r\n  return \"pending\";\r\n}\r\n\r\nfunction getSortedEntries(\r\n  entries: [string, React.RefObject<ItemElement | null>][],\r\n) {\r\n  return entries.sort((a, b) => {\r\n    const elementA = a[1].current;\r\n    const elementB = b[1].current;\r\n    if (!elementA || !elementB) return 0;\r\n    const position = elementA.compareDocumentPosition(elementB);\r\n    if (position & Node.DOCUMENT_POSITION_FOLLOWING) return -1;\r\n    if (position & Node.DOCUMENT_POSITION_PRECEDING) return 1;\r\n    return 0;\r\n  });\r\n}\r\n\r\nfunction useStore<T>(selector: (store: Store) => T): T {\r\n  const store = React.useContext(StoreContext);\r\n  if (!store) {\r\n    throw new Error(`\\`useStore\\` must be used within \\`${ROOT_NAME}\\``);\r\n  }\r\n\r\n  const getSnapshot = React.useCallback(\r\n    () => selector(store),\r\n    [store, selector],\r\n  );\r\n\r\n  return React.useSyncExternalStore(store.subscribe, getSnapshot, getSnapshot);\r\n}\r\n\r\ninterface StoreState {\r\n  items: Map<string, React.RefObject<ItemElement | null>>;\r\n}\r\n\r\ninterface Store {\r\n  subscribe: (callback: () => void) => () => void;\r\n  getState: () => StoreState;\r\n  notify: () => void;\r\n  onItemRegister: (\r\n    id: string,\r\n    ref: React.RefObject<ItemElement | null>,\r\n  ) => void;\r\n  onItemUnregister: (id: string) => void;\r\n  getNextItemStatus: (id: string, activeIndex?: number) => Status | undefined;\r\n  getItemIndex: (id: string) => number;\r\n}\r\n\r\nconst StoreContext = React.createContext<Store | null>(null);\r\n\r\nfunction useStoreContext(consumerName: string) {\r\n  const context = React.useContext(StoreContext);\r\n  if (!context) {\r\n    throw new Error(`\\`${consumerName}\\` must be used within \\`${ROOT_NAME}\\``);\r\n  }\r\n  return context;\r\n}\r\n\r\ninterface TimelineContextValue {\r\n  dir: Direction;\r\n  orientation: Orientation;\r\n  variant: Variant;\r\n  activeIndex?: number;\r\n}\r\n\r\nconst TimelineContext = React.createContext<TimelineContextValue | null>(null);\r\n\r\nfunction useTimelineContext(consumerName: string) {\r\n  const context = React.useContext(TimelineContext);\r\n  if (!context) {\r\n    throw new Error(`\\`${consumerName}\\` must be used within \\`${ROOT_NAME}\\``);\r\n  }\r\n  return context;\r\n}\r\n\r\nconst timelineVariants = cva(\r\n  \"relative flex [--timeline-connector-thickness:0.125rem] [--timeline-dot-size:0.875rem]\",\r\n  {\r\n    variants: {\r\n      orientation: {\r\n        vertical: \"flex-col\",\r\n        horizontal: \"flex-row items-start\",\r\n      },\r\n      variant: {\r\n        default: \"\",\r\n        alternate: \"\",\r\n      },\r\n    },\r\n    compoundVariants: [\r\n      {\r\n        orientation: \"vertical\",\r\n        variant: \"default\",\r\n        class: \"gap-6\",\r\n      },\r\n      {\r\n        orientation: \"horizontal\",\r\n        variant: \"default\",\r\n        class: \"gap-8\",\r\n      },\r\n      {\r\n        orientation: \"vertical\",\r\n        variant: \"alternate\",\r\n        class: \"relative w-full gap-3\",\r\n      },\r\n      {\r\n        orientation: \"horizontal\",\r\n        variant: \"alternate\",\r\n        class: \"items-center gap-4\",\r\n      },\r\n    ],\r\n    defaultVariants: {\r\n      orientation: \"vertical\",\r\n      variant: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\ninterface TimelineProps extends DivProps {\r\n  dir?: Direction;\r\n  orientation?: Orientation;\r\n  variant?: Variant;\r\n  activeIndex?: number;\r\n}\r\n\r\nfunction Timeline(props: TimelineProps) {\r\n  const {\r\n    orientation = \"vertical\",\r\n    variant = \"default\",\r\n    dir: dirProp,\r\n    activeIndex,\r\n    asChild,\r\n    className,\r\n    ...rootProps\r\n  } = props;\r\n\r\n  const dir = DirectionPrimitive.useDirection(dirProp);\r\n\r\n  const listenersRef = useLazyRef(() => new Set<() => void>());\r\n  const stateRef = useLazyRef<StoreState>(() => ({\r\n    items: new Map(),\r\n  }));\r\n\r\n  const store = React.useMemo<Store>(() => {\r\n    return {\r\n      subscribe: (cb) => {\r\n        listenersRef.current.add(cb);\r\n        return () => listenersRef.current.delete(cb);\r\n      },\r\n      getState: () => stateRef.current,\r\n      notify: () => {\r\n        for (const cb of listenersRef.current) {\r\n          cb();\r\n        }\r\n      },\r\n      onItemRegister: (\r\n        id: string,\r\n        ref: React.RefObject<ItemElement | null>,\r\n      ) => {\r\n        stateRef.current.items.set(id, ref);\r\n        store.notify();\r\n      },\r\n      onItemUnregister: (id: string) => {\r\n        stateRef.current.items.delete(id);\r\n        store.notify();\r\n      },\r\n      getNextItemStatus: (id: string, activeIndex?: number) => {\r\n        const entries = Array.from(stateRef.current.items.entries());\r\n        const sortedEntries = getSortedEntries(entries);\r\n\r\n        const currentIndex = sortedEntries.findIndex(([key]) => key === id);\r\n        if (currentIndex === -1 || currentIndex === sortedEntries.length - 1) {\r\n          return undefined;\r\n        }\r\n\r\n        const nextItemIndex = currentIndex + 1;\r\n        return getItemStatus(nextItemIndex, activeIndex);\r\n      },\r\n      getItemIndex: (id: string) => {\r\n        const entries = Array.from(stateRef.current.items.entries());\r\n        const sortedEntries = getSortedEntries(entries);\r\n        return sortedEntries.findIndex(([key]) => key === id);\r\n      },\r\n    };\r\n  }, [listenersRef, stateRef]);\r\n\r\n  const contextValue = React.useMemo<TimelineContextValue>(\r\n    () => ({\r\n      dir,\r\n      orientation,\r\n      variant,\r\n      activeIndex,\r\n    }),\r\n    [dir, orientation, variant, activeIndex],\r\n  );\r\n\r\n  const RootPrimitive = asChild ? SlotPrimitive.Slot : \"div\";\r\n\r\n  return (\r\n    <StoreContext.Provider value={store}>\r\n      <TimelineContext.Provider value={contextValue}>\r\n        <RootPrimitive\r\n          role=\"list\"\r\n          aria-orientation={orientation}\r\n          data-slot=\"timeline\"\r\n          data-orientation={orientation}\r\n          data-variant={variant}\r\n          dir={dir}\r\n          {...rootProps}\r\n          className={cn(timelineVariants({ orientation, variant, className }))}\r\n        />\r\n      </TimelineContext.Provider>\r\n    </StoreContext.Provider>\r\n  );\r\n}\r\n\r\ninterface TimelineItemContextValue {\r\n  id: string;\r\n  status: Status;\r\n  isAlternateRight: boolean;\r\n}\r\n\r\nconst TimelineItemContext =\r\n  React.createContext<TimelineItemContextValue | null>(null);\r\n\r\nfunction useTimelineItemContext(consumerName: string) {\r\n  const context = React.useContext(TimelineItemContext);\r\n  if (!context) {\r\n    throw new Error(`\\`${consumerName}\\` must be used within \\`${ITEM_NAME}\\``);\r\n  }\r\n  return context;\r\n}\r\n\r\nconst timelineItemVariants = cva(\"relative flex\", {\r\n  variants: {\r\n    orientation: {\r\n      vertical: \"\",\r\n      horizontal: \"\",\r\n    },\r\n    variant: {\r\n      default: \"\",\r\n      alternate: \"\",\r\n    },\r\n    isAlternateRight: {\r\n      true: \"\",\r\n      false: \"\",\r\n    },\r\n  },\r\n  compoundVariants: [\r\n    {\r\n      orientation: \"vertical\",\r\n      variant: \"default\",\r\n      class: \"gap-3 pb-8 last:pb-0\",\r\n    },\r\n    {\r\n      orientation: \"horizontal\",\r\n      variant: \"default\",\r\n      class: \"flex-col gap-3\",\r\n    },\r\n    {\r\n      orientation: \"vertical\",\r\n      variant: \"alternate\",\r\n      isAlternateRight: false,\r\n      class: \"w-1/2 gap-3 pr-6 pb-12 last:pb-0\",\r\n    },\r\n    {\r\n      orientation: \"vertical\",\r\n      variant: \"alternate\",\r\n      isAlternateRight: true,\r\n      class: \"ml-auto w-1/2 flex-row-reverse gap-3 pb-12 pl-6 last:pb-0\",\r\n    },\r\n    {\r\n      orientation: \"horizontal\",\r\n      variant: \"alternate\",\r\n      class: \"grid min-w-0 grid-rows-[1fr_auto_1fr] gap-3\",\r\n    },\r\n  ],\r\n  defaultVariants: {\r\n    orientation: \"vertical\",\r\n    variant: \"default\",\r\n    isAlternateRight: false,\r\n  },\r\n});\r\n\r\nfunction TimelineItem(props: DivProps) {\r\n  const { asChild, className, id, ref, ...itemProps } = props;\r\n\r\n  const { dir, orientation, variant, activeIndex } =\r\n    useTimelineContext(ITEM_NAME);\r\n  const store = useStoreContext(ITEM_NAME);\r\n\r\n  const instanceId = React.useId();\r\n  const itemId = id ?? instanceId;\r\n  const itemRef = React.useRef<ItemElement | null>(null);\r\n  const composedRef = useComposedRefs(ref, itemRef);\r\n\r\n  const itemIndex = useStore((state) => state.getItemIndex(itemId));\r\n\r\n  const status = React.useMemo<Status>(() => {\r\n    return getItemStatus(itemIndex, activeIndex);\r\n  }, [activeIndex, itemIndex]);\r\n\r\n  useIsomorphicLayoutEffect(() => {\r\n    store.onItemRegister(itemId, itemRef);\r\n    return () => {\r\n      store.onItemUnregister(itemId);\r\n    };\r\n  }, [id, store]);\r\n\r\n  const isAlternateRight = variant === \"alternate\" && itemIndex % 2 === 1;\r\n\r\n  const itemContextValue = React.useMemo<TimelineItemContextValue>(\r\n    () => ({ id: itemId, status, isAlternateRight }),\r\n    [itemId, status, isAlternateRight],\r\n  );\r\n\r\n  const ItemPrimitive = asChild ? SlotPrimitive.Slot : \"div\";\r\n\r\n  return (\r\n    <TimelineItemContext.Provider value={itemContextValue}>\r\n      <ItemPrimitive\r\n        role=\"listitem\"\r\n        aria-current={status === \"active\" ? \"step\" : undefined}\r\n        data-slot=\"timeline-item\"\r\n        data-status={status}\r\n        data-orientation={orientation}\r\n        data-alternate-right={isAlternateRight ? \"\" : undefined}\r\n        id={itemId}\r\n        dir={dir}\r\n        {...itemProps}\r\n        ref={composedRef}\r\n        className={cn(\r\n          timelineItemVariants({\r\n            orientation,\r\n            variant,\r\n            isAlternateRight,\r\n            className,\r\n          }),\r\n        )}\r\n      />\r\n    </TimelineItemContext.Provider>\r\n  );\r\n}\r\n\r\nconst timelineContentVariants = cva(\"flex-1\", {\r\n  variants: {\r\n    orientation: {\r\n      vertical: \"\",\r\n      horizontal: \"\",\r\n    },\r\n    variant: {\r\n      default: \"\",\r\n      alternate: \"\",\r\n    },\r\n    isAlternateRight: {\r\n      true: \"\",\r\n      false: \"\",\r\n    },\r\n  },\r\n  compoundVariants: [\r\n    {\r\n      variant: \"alternate\",\r\n      orientation: \"vertical\",\r\n      isAlternateRight: false,\r\n      class: \"text-right\",\r\n    },\r\n    {\r\n      variant: \"alternate\",\r\n      orientation: \"horizontal\",\r\n      isAlternateRight: false,\r\n      class: \"row-start-3 pt-2\",\r\n    },\r\n    {\r\n      variant: \"alternate\",\r\n      orientation: \"horizontal\",\r\n      isAlternateRight: true,\r\n      class: \"row-start-1 pb-2\",\r\n    },\r\n  ],\r\n  defaultVariants: {\r\n    orientation: \"vertical\",\r\n    variant: \"default\",\r\n    isAlternateRight: false,\r\n  },\r\n});\r\n\r\nfunction TimelineContent(props: DivProps) {\r\n  const { asChild, className, ...contentProps } = props;\r\n\r\n  const { variant, orientation } = useTimelineContext(CONTENT_NAME);\r\n  const { status, isAlternateRight } = useTimelineItemContext(CONTENT_NAME);\r\n\r\n  const ContentPrimitive = asChild ? SlotPrimitive.Slot : \"div\";\r\n\r\n  return (\r\n    <ContentPrimitive\r\n      data-slot=\"timeline-content\"\r\n      data-status={status}\r\n      {...contentProps}\r\n      className={cn(\r\n        timelineContentVariants({\r\n          orientation,\r\n          variant,\r\n          isAlternateRight,\r\n          className,\r\n        }),\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nconst timelineDotVariants = cva(\r\n  \"relative z-10 flex size-[var(--timeline-dot-size)] shrink-0 items-center justify-center rounded-full border-2 bg-background\",\r\n  {\r\n    variants: {\r\n      status: {\r\n        completed: \"border-primary\",\r\n        active: \"border-primary\",\r\n        pending: \"border-border\",\r\n      },\r\n      orientation: {\r\n        vertical: \"\",\r\n        horizontal: \"\",\r\n      },\r\n      variant: {\r\n        default: \"\",\r\n        alternate: \"\",\r\n      },\r\n      isAlternateRight: {\r\n        true: \"\",\r\n        false: \"\",\r\n      },\r\n    },\r\n    compoundVariants: [\r\n      {\r\n        variant: \"alternate\",\r\n        orientation: \"vertical\",\r\n        isAlternateRight: false,\r\n        class:\r\n          \"absolute -right-[calc(var(--timeline-dot-size)/2-var(--timeline-connector-thickness)/2)] bg-background\",\r\n      },\r\n      {\r\n        variant: \"alternate\",\r\n        orientation: \"vertical\",\r\n        isAlternateRight: true,\r\n        class:\r\n          \"absolute -left-[calc(var(--timeline-dot-size)/2-var(--timeline-connector-thickness)/2)] bg-background\",\r\n      },\r\n      {\r\n        variant: \"alternate\",\r\n        orientation: \"horizontal\",\r\n        class: \"row-start-2 bg-background\",\r\n      },\r\n      {\r\n        variant: \"alternate\",\r\n        status: \"completed\",\r\n        class: \"bg-background\",\r\n      },\r\n      {\r\n        variant: \"alternate\",\r\n        status: \"active\",\r\n        class: \"bg-background\",\r\n      },\r\n    ],\r\n    defaultVariants: {\r\n      status: \"pending\",\r\n      orientation: \"vertical\",\r\n      variant: \"default\",\r\n      isAlternateRight: false,\r\n    },\r\n  },\r\n);\r\n\r\nfunction TimelineDot(props: DivProps) {\r\n  const { asChild, className, ...dotProps } = props;\r\n\r\n  const { orientation, variant } = useTimelineContext(DOT_NAME);\r\n  const { status, isAlternateRight } = useTimelineItemContext(DOT_NAME);\r\n\r\n  const DotPrimitive = asChild ? SlotPrimitive.Slot : \"div\";\r\n\r\n  return (\r\n    <DotPrimitive\r\n      data-slot=\"timeline-dot\"\r\n      data-status={status}\r\n      data-orientation={orientation}\r\n      {...dotProps}\r\n      className={cn(\r\n        timelineDotVariants({\r\n          status,\r\n          orientation,\r\n          variant,\r\n          isAlternateRight,\r\n          className,\r\n        }),\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nconst timelineConnectorVariants = cva(\"absolute z-0\", {\r\n  variants: {\r\n    isCompleted: {\r\n      true: \"bg-primary\",\r\n      false: \"bg-border\",\r\n    },\r\n    orientation: {\r\n      vertical: \"\",\r\n      horizontal: \"\",\r\n    },\r\n    variant: {\r\n      default: \"\",\r\n      alternate: \"\",\r\n    },\r\n    isAlternateRight: {\r\n      true: \"\",\r\n      false: \"\",\r\n    },\r\n  },\r\n  compoundVariants: [\r\n    {\r\n      orientation: \"vertical\",\r\n      variant: \"default\",\r\n      class:\r\n        \"start-[calc(var(--timeline-dot-size)/2-var(--timeline-connector-thickness)/2)] top-3 h-[calc(100%+0.5rem)] w-[var(--timeline-connector-thickness)]\",\r\n    },\r\n    {\r\n      orientation: \"horizontal\",\r\n      variant: \"default\",\r\n      class:\r\n        \"start-3 top-[calc(var(--timeline-dot-size)/2-var(--timeline-connector-thickness)/2)] h-[var(--timeline-connector-thickness)] w-[calc(100%+0.5rem)]\",\r\n    },\r\n    {\r\n      orientation: \"vertical\",\r\n      variant: \"alternate\",\r\n      isAlternateRight: false,\r\n      class:\r\n        \"top-2 -right-[calc(var(--timeline-connector-thickness)/2)] h-full w-[var(--timeline-connector-thickness)]\",\r\n    },\r\n    {\r\n      orientation: \"vertical\",\r\n      variant: \"alternate\",\r\n      isAlternateRight: true,\r\n      class:\r\n        \"top-2 -left-[calc(var(--timeline-connector-thickness)/2)] h-full w-[var(--timeline-connector-thickness)]\",\r\n    },\r\n    {\r\n      orientation: \"horizontal\",\r\n      variant: \"alternate\",\r\n      class:\r\n        \"top-[calc(var(--timeline-dot-size)/2-var(--timeline-connector-thickness)/2)] left-3 row-start-2 h-[var(--timeline-connector-thickness)] w-[calc(100%+0.5rem)]\",\r\n    },\r\n  ],\r\n  defaultVariants: {\r\n    isCompleted: false,\r\n    orientation: \"vertical\",\r\n    variant: \"default\",\r\n    isAlternateRight: false,\r\n  },\r\n});\r\n\r\ninterface TimelineConnectorProps extends DivProps {\r\n  forceMount?: boolean;\r\n}\r\n\r\nfunction TimelineConnector(props: TimelineConnectorProps) {\r\n  const { asChild, forceMount, className, ...connectorProps } = props;\r\n\r\n  const { orientation, variant, activeIndex } =\r\n    useTimelineContext(CONNECTOR_NAME);\r\n  const { id, status, isAlternateRight } =\r\n    useTimelineItemContext(CONNECTOR_NAME);\r\n\r\n  const nextItemStatus = useStore((state) =>\r\n    state.getNextItemStatus(id, activeIndex),\r\n  );\r\n\r\n  const isLastItem = nextItemStatus === undefined;\r\n\r\n  if (!forceMount && isLastItem) return null;\r\n\r\n  const isConnectorCompleted =\r\n    nextItemStatus === \"completed\" || nextItemStatus === \"active\";\r\n\r\n  const ConnectorPrimitive = asChild ? SlotPrimitive.Slot : \"div\";\r\n\r\n  return (\r\n    <ConnectorPrimitive\r\n      aria-hidden=\"true\"\r\n      data-slot=\"timeline-connector\"\r\n      data-completed={isConnectorCompleted ? \"\" : undefined}\r\n      data-status={status}\r\n      data-orientation={orientation}\r\n      {...connectorProps}\r\n      className={cn(\r\n        timelineConnectorVariants({\r\n          isCompleted: isConnectorCompleted,\r\n          orientation,\r\n          variant,\r\n          isAlternateRight,\r\n          className,\r\n        }),\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nfunction TimelineHeader(props: DivProps) {\r\n  const { asChild, className, ...headerProps } = props;\r\n\r\n  const HeaderPrimitive = asChild ? SlotPrimitive.Slot : \"div\";\r\n\r\n  return (\r\n    <HeaderPrimitive\r\n      data-slot=\"timeline-header\"\r\n      {...headerProps}\r\n      className={cn(\"flex flex-col gap-1\", className)}\r\n    />\r\n  );\r\n}\r\n\r\nfunction TimelineTitle(props: DivProps) {\r\n  const { asChild, className, ...titleProps } = props;\r\n\r\n  const TitlePrimitive = asChild ? SlotPrimitive.Slot : \"div\";\r\n\r\n  return (\r\n    <TitlePrimitive\r\n      data-slot=\"timeline-title\"\r\n      {...titleProps}\r\n      className={cn(\"font-semibold leading-none\", className)}\r\n    />\r\n  );\r\n}\r\n\r\nfunction TimelineDescription(props: DivProps) {\r\n  const { asChild, className, ...descriptionProps } = props;\r\n\r\n  const DescriptionPrimitive = asChild ? SlotPrimitive.Slot : \"div\";\r\n\r\n  return (\r\n    <DescriptionPrimitive\r\n      data-slot=\"timeline-description\"\r\n      {...descriptionProps}\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n    />\r\n  );\r\n}\r\n\r\ninterface TimelineTimeProps extends React.ComponentProps<\"time\"> {\r\n  asChild?: boolean;\r\n}\r\n\r\nfunction TimelineTime(props: TimelineTimeProps) {\r\n  const { asChild, className, ...timeProps } = props;\r\n\r\n  const TimePrimitive = asChild ? SlotPrimitive.Slot : \"time\";\r\n\r\n  return (\r\n    <TimePrimitive\r\n      data-slot=\"timeline-time\"\r\n      {...timeProps}\r\n      className={cn(\"text-muted-foreground text-xs\", className)}\r\n    />\r\n  );\r\n}\r\n\r\nexport {\r\n  Timeline,\r\n  TimelineItem,\r\n  TimelineDot,\r\n  TimelineConnector,\r\n  TimelineContent,\r\n  TimelineHeader,\r\n  TimelineTitle,\r\n  TimelineDescription,\r\n  TimelineTime,\r\n  //\r\n  type TimelineProps,\r\n};\r\n",
      "type": "registry:ui",
      "target": ""
    },
    {
      "path": "lib/compose-refs.ts",
      "content": "import * as React from \"react\";\r\n\r\ntype PossibleRef<T> = React.Ref<T> | undefined;\r\n\r\n/**\r\n * Set a given ref to a given value\r\n * This utility takes care of different types of refs: callback refs and RefObject(s)\r\n */\r\nfunction setRef<T>(ref: PossibleRef<T>, value: T) {\r\n  if (typeof ref === \"function\") {\r\n    return ref(value);\r\n  }\r\n\r\n  if (ref !== null && ref !== undefined) {\r\n    ref.current = value;\r\n  }\r\n}\r\n\r\n/**\r\n * A utility to compose multiple refs together\r\n * Accepts callback refs and RefObject(s)\r\n */\r\nfunction composeRefs<T>(...refs: PossibleRef<T>[]): React.RefCallback<T> {\r\n  return (node) => {\r\n    let hasCleanup = false;\r\n    const cleanups = refs.map((ref) => {\r\n      const cleanup = setRef(ref, node);\r\n      if (!hasCleanup && typeof cleanup === \"function\") {\r\n        hasCleanup = true;\r\n      }\r\n      return cleanup;\r\n    });\r\n\r\n    // React <19 will log an error to the console if a callback ref returns a\r\n    // value. We don't use ref cleanups internally so this will only happen if a\r\n    // user's ref callback returns a value, which we only expect if they are\r\n    // using the cleanup functionality added in React 19.\r\n    if (hasCleanup) {\r\n      return () => {\r\n        for (let i = 0; i < cleanups.length; i++) {\r\n          const cleanup = cleanups[i];\r\n          if (typeof cleanup === \"function\") {\r\n            cleanup();\r\n          } else {\r\n            setRef(refs[i], null);\r\n          }\r\n        }\r\n      };\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * A custom hook that composes multiple refs\r\n * Accepts callback refs and RefObject(s)\r\n */\r\nfunction useComposedRefs<T>(...refs: PossibleRef<T>[]): React.RefCallback<T> {\r\n  // biome-ignore lint/correctness/useExhaustiveDependencies: we want to memoize by all values\r\n  return React.useCallback(composeRefs(...refs), refs);\r\n}\r\n\r\nexport { composeRefs, useComposedRefs };\r\n",
      "type": "registry:lib",
      "target": ""
    }
  ],
  "type": "registry:ui"
}