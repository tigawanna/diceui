{
  "name": "color-swatch",
  "dependencies": [
    "radix-ui"
  ],
  "files": [
    {
      "path": "ui/color-swatch.tsx",
      "content": "\"use client\";\r\n\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\nimport { Slot as SlotPrimitive } from \"radix-ui\";\r\nimport * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst colorSwatchVariants = cva(\r\n  \"box-border rounded-sm border shadow-sm [background-clip:padding-box] data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n  {\r\n    variants: {\r\n      size: {\r\n        default: \"size-8\",\r\n        sm: \"size-6\",\r\n        lg: \"size-12\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      size: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nfunction getIsCssColor(v: string): boolean {\r\n  try {\r\n    return typeof CSS !== \"undefined\" && typeof CSS.supports === \"function\"\r\n      ? CSS.supports(\"color\", v)\r\n      : true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction getHasAlpha(v: string): boolean {\r\n  const s = v.trim().toLowerCase();\r\n\r\n  if (s === \"transparent\") return true;\r\n\r\n  if (/^#(?:[0-9a-f]{4}|[0-9a-f]{8})$/i.test(s)) return true;\r\n\r\n  if (/\\b(?:rgba|hsla)\\s*\\(/i.test(s)) return true;\r\n\r\n  if (\r\n    /\\b(?:rgb|hsl|lab|lch|oklab|oklch|color)\\s*\\([^)]*\\/\\s*[\\d.]+%?\\s*\\)/i.test(\r\n      s,\r\n    )\r\n  ) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\ninterface ColorSwatchProps\r\n  extends Omit<React.ComponentProps<\"div\">, \"children\">,\r\n    VariantProps<typeof colorSwatchVariants> {\r\n  color?: string;\r\n  asChild?: boolean;\r\n  disabled?: boolean;\r\n  withoutTransparency?: boolean;\r\n}\r\n\r\nfunction ColorSwatch({\r\n  color,\r\n  size = \"default\",\r\n  asChild = false,\r\n  disabled = false,\r\n  withoutTransparency = false,\r\n  className,\r\n  style,\r\n  ...props\r\n}: ColorSwatchProps) {\r\n  const colorValue = color?.trim();\r\n\r\n  const backgroundStyle = React.useMemo<React.CSSProperties>(() => {\r\n    if (!colorValue) {\r\n      return {\r\n        background:\r\n          \"linear-gradient(to bottom right, transparent calc(50% - 1px), hsl(var(--destructive)) calc(50% - 1px) calc(50% + 1px), transparent calc(50% + 1px)) no-repeat\",\r\n      };\r\n    }\r\n\r\n    if (!getIsCssColor(colorValue)) {\r\n      return { backgroundColor: \"transparent\" };\r\n    }\r\n\r\n    if (!withoutTransparency && getHasAlpha(colorValue)) {\r\n      return {\r\n        background: `linear-gradient(${colorValue}, ${colorValue}), repeating-conic-gradient(#ccc 0% 25%, #fff 0% 50%) 0% 50% / 10px 10px`,\r\n      };\r\n    }\r\n\r\n    return { backgroundColor: colorValue };\r\n  }, [colorValue, withoutTransparency]);\r\n\r\n  const ariaLabel = !colorValue\r\n    ? \"No color selected\"\r\n    : `Color swatch: ${colorValue}`;\r\n\r\n  const Primitive = asChild ? SlotPrimitive.Slot : \"div\";\r\n\r\n  return (\r\n    <Primitive\r\n      role=\"img\"\r\n      aria-label={ariaLabel}\r\n      aria-disabled={disabled || undefined}\r\n      data-disabled={disabled ? \"\" : undefined}\r\n      data-slot=\"color-swatch\"\r\n      {...props}\r\n      className={cn(colorSwatchVariants({ size }), className)}\r\n      style={{\r\n        ...backgroundStyle,\r\n        forcedColorAdjust: \"none\",\r\n        ...style,\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nexport { ColorSwatch };\r\n",
      "type": "registry:ui",
      "target": ""
    }
  ],
  "type": "registry:ui"
}