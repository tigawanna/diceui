{
  "name": "circular-progress",
  "dependencies": [
    "radix-ui"
  ],
  "files": [
    {
      "path": "ui/circular-progress.tsx",
      "content": "\"use client\";\r\n\r\nimport { Slot as SlotPrimitive } from \"radix-ui\";\r\nimport * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst CIRCULAR_PROGRESS_NAME = \"CircularProgress\";\r\nconst INDICATOR_NAME = \"CircularProgressIndicator\";\r\nconst TRACK_NAME = \"CircularProgressTrack\";\r\nconst RANGE_NAME = \"CircularProgressRange\";\r\nconst VALUE_TEXT_NAME = \"CircularProgressValueText\";\r\n\r\nconst DEFAULT_MAX = 100;\r\n\r\ntype ProgressState = \"indeterminate\" | \"complete\" | \"loading\";\r\n\r\nfunction getProgressState(\r\n  value: number | undefined | null,\r\n  maxValue: number,\r\n): ProgressState {\r\n  return value == null\r\n    ? \"indeterminate\"\r\n    : value === maxValue\r\n      ? \"complete\"\r\n      : \"loading\";\r\n}\r\n\r\nfunction getIsValidNumber(value: unknown): value is number {\r\n  return typeof value === \"number\" && Number.isFinite(value);\r\n}\r\n\r\nfunction getIsValidMaxNumber(max: unknown): max is number {\r\n  return getIsValidNumber(max) && max > 0;\r\n}\r\n\r\nfunction getIsValidValueNumber(\r\n  value: unknown,\r\n  min: number,\r\n  max: number,\r\n): value is number {\r\n  return getIsValidNumber(value) && value <= max && value >= min;\r\n}\r\n\r\nfunction getDefaultValueText(value: number, min: number, max: number): string {\r\n  const percentage = max === min ? 100 : ((value - min) / (max - min)) * 100;\r\n  return `${Math.round(percentage)}%`;\r\n}\r\n\r\nfunction getInvalidValueError(\r\n  propValue: string,\r\n  componentName: string,\r\n): string {\r\n  return `Invalid prop \\`value\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. The \\`value\\` prop must be a number between \\`min\\` and \\`max\\` (inclusive), or \\`null\\`/\\`undefined\\` for indeterminate progress. The value will be clamped to the valid range.`;\r\n}\r\n\r\nfunction getInvalidMaxError(propValue: string, componentName: string): string {\r\n  return `Invalid prop \\`max\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. Only numbers greater than 0 are valid. Defaulting to ${DEFAULT_MAX}.`;\r\n}\r\n\r\ninterface CircularProgressContextValue {\r\n  value: number | null;\r\n  valueText: string | undefined;\r\n  max: number;\r\n  min: number;\r\n  state: ProgressState;\r\n  radius: number;\r\n  thickness: number;\r\n  size: number;\r\n  center: number;\r\n  circumference: number;\r\n  percentage: number | null;\r\n  valueTextId?: string;\r\n}\r\n\r\nconst CircularProgressContext =\r\n  React.createContext<CircularProgressContextValue | null>(null);\r\n\r\nfunction useCircularProgressContext(consumerName: string) {\r\n  const context = React.useContext(CircularProgressContext);\r\n  if (!context) {\r\n    throw new Error(\r\n      `\\`${consumerName}\\` must be used within \\`${CIRCULAR_PROGRESS_NAME}\\``,\r\n    );\r\n  }\r\n  return context;\r\n}\r\n\r\ninterface CircularProgressProps extends React.ComponentProps<\"div\"> {\r\n  value?: number | null | undefined;\r\n  getValueText?(value: number, min: number, max: number): string;\r\n  min?: number;\r\n  max?: number;\r\n  size?: number;\r\n  thickness?: number;\r\n  label?: string;\r\n  asChild?: boolean;\r\n}\r\n\r\nfunction CircularProgress(props: CircularProgressProps) {\r\n  const {\r\n    value: valueProp = null,\r\n    getValueText = getDefaultValueText,\r\n    min: minProp = 0,\r\n    max: maxProp,\r\n    size = 48,\r\n    thickness = 4,\r\n    label,\r\n    asChild,\r\n    className,\r\n    children,\r\n    ...rootProps\r\n  } = props;\r\n\r\n  if ((maxProp || maxProp === 0) && !getIsValidMaxNumber(maxProp)) {\r\n    if (process.env.NODE_ENV !== \"production\") {\r\n      console.error(getInvalidMaxError(`${maxProp}`, CIRCULAR_PROGRESS_NAME));\r\n    }\r\n  }\r\n\r\n  const rawMax = getIsValidMaxNumber(maxProp) ? maxProp : DEFAULT_MAX;\r\n  const min = getIsValidNumber(minProp) ? minProp : 0;\r\n  const max = rawMax <= min ? min + 1 : rawMax;\r\n\r\n  if (process.env.NODE_ENV !== \"production\" && thickness >= size) {\r\n    console.warn(\r\n      `CircularProgress: thickness (${thickness}) should be less than size (${size}) for proper rendering.`,\r\n    );\r\n  }\r\n\r\n  if (valueProp !== null && !getIsValidValueNumber(valueProp, min, max)) {\r\n    if (process.env.NODE_ENV !== \"production\") {\r\n      console.error(\r\n        getInvalidValueError(`${valueProp}`, CIRCULAR_PROGRESS_NAME),\r\n      );\r\n    }\r\n  }\r\n\r\n  const value = getIsValidValueNumber(valueProp, min, max)\r\n    ? valueProp\r\n    : getIsValidNumber(valueProp) && valueProp > max\r\n      ? max\r\n      : getIsValidNumber(valueProp) && valueProp < min\r\n        ? min\r\n        : null;\r\n\r\n  const valueText = getIsValidNumber(value)\r\n    ? getValueText(value, min, max)\r\n    : undefined;\r\n  const state = getProgressState(value, max);\r\n  const radius = Math.max(0, (size - thickness) / 2);\r\n  const center = size / 2;\r\n  const circumference = 2 * Math.PI * radius;\r\n\r\n  const percentage = getIsValidNumber(value)\r\n    ? max === min\r\n      ? 1\r\n      : (value - min) / (max - min)\r\n    : null;\r\n\r\n  const labelId = React.useId();\r\n  const valueTextId = React.useId();\r\n\r\n  const contextValue = React.useMemo<CircularProgressContextValue>(\r\n    () => ({\r\n      value,\r\n      valueText,\r\n      max,\r\n      min,\r\n      state,\r\n      radius,\r\n      thickness,\r\n      size,\r\n      center,\r\n      circumference,\r\n      percentage,\r\n      valueTextId,\r\n    }),\r\n    [\r\n      value,\r\n      valueText,\r\n      max,\r\n      min,\r\n      state,\r\n      radius,\r\n      thickness,\r\n      size,\r\n      center,\r\n      circumference,\r\n      percentage,\r\n      valueTextId,\r\n    ],\r\n  );\r\n\r\n  const RootPrimitive = asChild ? SlotPrimitive.Slot : \"div\";\r\n\r\n  return (\r\n    <CircularProgressContext.Provider value={contextValue}>\r\n      <RootPrimitive\r\n        role=\"progressbar\"\r\n        aria-describedby={valueText ? valueTextId : undefined}\r\n        aria-labelledby={label ? labelId : undefined}\r\n        aria-valuemax={max}\r\n        aria-valuemin={min}\r\n        aria-valuenow={getIsValidNumber(value) ? value : undefined}\r\n        aria-valuetext={valueText}\r\n        data-state={state}\r\n        data-value={value ?? undefined}\r\n        data-max={max}\r\n        data-min={min}\r\n        data-percentage={percentage}\r\n        {...rootProps}\r\n        className={cn(\r\n          \"relative inline-flex w-fit items-center justify-center\",\r\n          className,\r\n        )}\r\n      >\r\n        {children}\r\n        {label && <div id={labelId}>{label}</div>}\r\n      </RootPrimitive>\r\n    </CircularProgressContext.Provider>\r\n  );\r\n}\r\n\r\nfunction CircularProgressIndicator(props: React.ComponentProps<\"svg\">) {\r\n  const { className, ...indicatorProps } = props;\r\n\r\n  const context = useCircularProgressContext(INDICATOR_NAME);\r\n\r\n  return (\r\n    <svg\r\n      aria-hidden=\"true\"\r\n      focusable=\"false\"\r\n      viewBox={`0 0 ${context.size} ${context.size}`}\r\n      data-state={context.state}\r\n      data-value={context.value ?? undefined}\r\n      data-max={context.max}\r\n      data-min={context.min}\r\n      data-percentage={context.percentage}\r\n      width={context.size}\r\n      height={context.size}\r\n      {...indicatorProps}\r\n      className={cn(\"-rotate-90 transform\", className)}\r\n    />\r\n  );\r\n}\r\n\r\nCircularProgressIndicator.displayName = INDICATOR_NAME;\r\n\r\nfunction CircularProgressTrack(props: React.ComponentProps<\"circle\">) {\r\n  const { className, ...trackProps } = props;\r\n\r\n  const context = useCircularProgressContext(TRACK_NAME);\r\n\r\n  return (\r\n    <circle\r\n      data-state={context.state}\r\n      cx={context.center}\r\n      cy={context.center}\r\n      r={context.radius}\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeWidth={context.thickness}\r\n      strokeLinecap=\"round\"\r\n      vectorEffect=\"non-scaling-stroke\"\r\n      {...trackProps}\r\n      className={cn(\"text-muted-foreground/20\", className)}\r\n    />\r\n  );\r\n}\r\n\r\nfunction CircularProgressRange(props: React.ComponentProps<\"circle\">) {\r\n  const { className, ...rangeProps } = props;\r\n\r\n  const context = useCircularProgressContext(RANGE_NAME);\r\n\r\n  const strokeDasharray = context.circumference;\r\n  const strokeDashoffset =\r\n    context.state === \"indeterminate\"\r\n      ? context.circumference * 0.75\r\n      : context.percentage !== null\r\n        ? context.circumference - context.percentage * context.circumference\r\n        : context.circumference;\r\n\r\n  return (\r\n    <circle\r\n      data-state={context.state}\r\n      data-value={context.value ?? undefined}\r\n      data-max={context.max}\r\n      data-min={context.min}\r\n      cx={context.center}\r\n      cy={context.center}\r\n      r={context.radius}\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeWidth={context.thickness}\r\n      strokeLinecap=\"round\"\r\n      strokeDasharray={strokeDasharray}\r\n      strokeDashoffset={strokeDashoffset}\r\n      vectorEffect=\"non-scaling-stroke\"\r\n      {...rangeProps}\r\n      className={cn(\r\n        \"origin-center text-primary transition-all duration-300 ease-in-out\",\r\n        context.state === \"indeterminate\" &&\r\n          \"motion-reduce:animate-none motion-safe:[animation:var(--animate-spin-around)]\",\r\n        className,\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\ninterface CircularProgressValueTextProps extends React.ComponentProps<\"span\"> {\r\n  asChild?: boolean;\r\n}\r\n\r\nfunction CircularProgressValueText(props: CircularProgressValueTextProps) {\r\n  const { asChild, className, children, ...valueTextProps } = props;\r\n\r\n  const context = useCircularProgressContext(VALUE_TEXT_NAME);\r\n\r\n  const ValueTextPrimitive = asChild ? SlotPrimitive.Slot : \"span\";\r\n\r\n  return (\r\n    <ValueTextPrimitive\r\n      id={context.valueTextId}\r\n      data-state={context.state}\r\n      {...valueTextProps}\r\n      className={cn(\r\n        \"absolute inset-0 flex items-center justify-center font-medium text-sm\",\r\n        className,\r\n      )}\r\n    >\r\n      {children ?? context.valueText}\r\n    </ValueTextPrimitive>\r\n  );\r\n}\r\n\r\nfunction CircularProgressCombined(props: CircularProgressProps) {\r\n  return (\r\n    <CircularProgress {...props}>\r\n      <CircularProgressIndicator>\r\n        <CircularProgressTrack />\r\n        <CircularProgressRange />\r\n      </CircularProgressIndicator>\r\n      <CircularProgressValueText />\r\n    </CircularProgress>\r\n  );\r\n}\r\n\r\nexport {\r\n  CircularProgress,\r\n  CircularProgressIndicator,\r\n  CircularProgressTrack,\r\n  CircularProgressRange,\r\n  CircularProgressValueText,\r\n  CircularProgressCombined,\r\n  //\r\n  type CircularProgressProps,\r\n};\r\n",
      "type": "registry:ui",
      "target": ""
    }
  ],
  "cssVars": {
    "theme": {
      "--animate-spin-around": "spin-around 0.8s linear infinite"
    }
  },
  "css": {
    "@keyframes spin-around": {
      "0%": {
        "transform": "rotate(-90deg)"
      },
      "100%": {
        "transform": "rotate(270deg)"
      }
    }
  },
  "type": "registry:ui"
}