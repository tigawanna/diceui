{
  "name": "avatar-group",
  "dependencies": [
    "radix-ui"
  ],
  "files": [
    {
      "path": "ui/avatar-group.tsx",
      "content": "import { cva, type VariantProps } from \"class-variance-authority\";\r\nimport { Slot as SlotPrimitive } from \"radix-ui\";\r\nimport * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst avatarGroupVariants = cva(\"flex items-center\", {\r\n  variants: {\r\n    orientation: {\r\n      horizontal: \"flex-row\",\r\n      vertical: \"flex-col\",\r\n    },\r\n    dir: {\r\n      ltr: \"\",\r\n      rtl: \"\",\r\n    },\r\n  },\r\n  compoundVariants: [\r\n    {\r\n      orientation: \"horizontal\",\r\n      dir: \"ltr\",\r\n      className: \"-space-x-1\",\r\n    },\r\n    {\r\n      orientation: \"horizontal\",\r\n      dir: \"rtl\",\r\n      className: \"flex-row-reverse -space-x-1 space-x-reverse\",\r\n    },\r\n    {\r\n      orientation: \"vertical\",\r\n      dir: \"ltr\",\r\n      className: \"-space-y-1\",\r\n    },\r\n    {\r\n      orientation: \"vertical\",\r\n      dir: \"rtl\",\r\n      className: \"flex-col-reverse -space-y-1 space-y-reverse\",\r\n    },\r\n  ],\r\n  defaultVariants: {\r\n    orientation: \"horizontal\",\r\n    dir: \"ltr\",\r\n  },\r\n});\r\n\r\ninterface AvatarGroupProps\r\n  extends Omit<React.ComponentProps<\"div\">, \"dir\">,\r\n    VariantProps<typeof avatarGroupVariants> {\r\n  size?: number;\r\n  max?: number;\r\n  asChild?: boolean;\r\n  reverse?: boolean;\r\n  renderOverflow?: (count: number) => React.ReactNode;\r\n}\r\n\r\nfunction AvatarGroup(props: AvatarGroupProps) {\r\n  const {\r\n    orientation = \"horizontal\",\r\n    dir = \"ltr\",\r\n    size = 40,\r\n    max,\r\n    asChild,\r\n    reverse = false,\r\n    renderOverflow,\r\n    className,\r\n    children,\r\n    ...rootProps\r\n  } = props;\r\n\r\n  const childrenArray = React.Children.toArray(children).filter(\r\n    React.isValidElement,\r\n  );\r\n  const itemCount = childrenArray.length;\r\n  const shouldTruncate = max && itemCount > max;\r\n  const visibleItems = shouldTruncate\r\n    ? childrenArray.slice(0, max - 1)\r\n    : childrenArray;\r\n  const overflowCount = shouldTruncate ? itemCount - (max - 1) : 0;\r\n  const totalRenderedItems = shouldTruncate ? max : itemCount;\r\n\r\n  const RootPrimitive = asChild ? SlotPrimitive.Slot : \"div\";\r\n\r\n  return (\r\n    <RootPrimitive\r\n      data-orientation={orientation}\r\n      data-slot=\"avatar-group\"\r\n      {...rootProps}\r\n      className={cn(avatarGroupVariants({ orientation, dir }), className)}\r\n    >\r\n      {visibleItems.map((child, index) => (\r\n        <AvatarGroupItem\r\n          key={index}\r\n          child={child}\r\n          index={index}\r\n          itemCount={totalRenderedItems}\r\n          orientation={orientation}\r\n          dir={dir}\r\n          size={size}\r\n          reverse={reverse}\r\n        />\r\n      ))}\r\n      {shouldTruncate && (\r\n        <AvatarGroupItem\r\n          key=\"overflow\"\r\n          child={\r\n            renderOverflow ? (\r\n              renderOverflow(overflowCount)\r\n            ) : (\r\n              <div className=\"inline-flex size-full items-center justify-center rounded-full bg-muted font-medium text-muted-foreground text-xs\">\r\n                +{overflowCount}\r\n              </div>\r\n            )\r\n          }\r\n          index={visibleItems.length}\r\n          itemCount={totalRenderedItems}\r\n          orientation={orientation}\r\n          dir={dir}\r\n          size={size}\r\n          reverse={reverse}\r\n        />\r\n      )}\r\n    </RootPrimitive>\r\n  );\r\n}\r\n\r\ninterface AvatarGroupItemProps\r\n  extends Omit<React.ComponentProps<typeof SlotPrimitive.Slot>, \"dir\">,\r\n    VariantProps<typeof avatarGroupVariants> {\r\n  child: React.ReactNode;\r\n  index: number;\r\n  itemCount: number;\r\n  size: number;\r\n  reverse: boolean;\r\n}\r\n\r\nfunction AvatarGroupItem(props: AvatarGroupItemProps) {\r\n  const {\r\n    child,\r\n    index,\r\n    size,\r\n    orientation,\r\n    dir = \"ltr\",\r\n    reverse = false,\r\n    itemCount,\r\n    className,\r\n    style,\r\n    ...itemProps\r\n  } = props;\r\n\r\n  const maskStyle = React.useMemo<React.CSSProperties>(() => {\r\n    let maskImage = \"\";\r\n\r\n    let shouldMask = false;\r\n\r\n    if (orientation === \"vertical\" && dir === \"rtl\" && reverse) {\r\n      shouldMask = index !== itemCount - 1;\r\n    } else {\r\n      shouldMask = reverse ? index < itemCount - 1 : index > 0;\r\n    }\r\n\r\n    if (shouldMask) {\r\n      const maskRadius = size / 2;\r\n      const maskOffset = size / 4 + size / 10;\r\n\r\n      if (orientation === \"vertical\") {\r\n        if (dir === \"ltr\") {\r\n          if (reverse) {\r\n            maskImage = `radial-gradient(circle ${maskRadius}px at 50% ${size + maskOffset}px, transparent 99%, white 100%)`;\r\n          } else {\r\n            maskImage = `radial-gradient(circle ${maskRadius}px at 50% -${maskOffset}px, transparent 99%, white 100%)`;\r\n          }\r\n        } else {\r\n          if (reverse) {\r\n            maskImage = `radial-gradient(circle ${maskRadius}px at 50% -${maskOffset}px, transparent 99%, white 100%)`;\r\n          } else {\r\n            maskImage = `radial-gradient(circle ${maskRadius}px at 50% ${size + maskOffset}px, transparent 99%, white 100%)`;\r\n          }\r\n        }\r\n      } else {\r\n        if (dir === \"ltr\") {\r\n          if (reverse) {\r\n            maskImage = `radial-gradient(circle ${maskRadius}px at ${size + maskOffset}px 50%, transparent 99%, white 100%)`;\r\n          } else {\r\n            maskImage = `radial-gradient(circle ${maskRadius}px at -${maskOffset}px 50%, transparent 99%, white 100%)`;\r\n          }\r\n        } else {\r\n          if (reverse) {\r\n            maskImage = `radial-gradient(circle ${maskRadius}px at -${maskOffset}px 50%, transparent 99%, white 100%)`;\r\n          } else {\r\n            maskImage = `radial-gradient(circle ${maskRadius}px at ${size + maskOffset}px 50%, transparent 99%, white 100%)`;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      width: size,\r\n      height: size,\r\n      maskImage,\r\n    };\r\n  }, [size, index, orientation, dir, reverse, itemCount]);\r\n\r\n  return (\r\n    <SlotPrimitive.Slot\r\n      data-slot=\"avatar-group-item\"\r\n      className={cn(\r\n        \"size-full shrink-0 overflow-hidden rounded-full [&_img]:size-full\",\r\n        className,\r\n      )}\r\n      style={{\r\n        ...maskStyle,\r\n        ...style,\r\n      }}\r\n      {...itemProps}\r\n    >\r\n      {child}\r\n    </SlotPrimitive.Slot>\r\n  );\r\n}\r\n\r\nexport { AvatarGroup };\r\n",
      "type": "registry:ui",
      "target": ""
    }
  ],
  "type": "registry:ui"
}